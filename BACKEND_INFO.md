# Информация о бэкенде и базе данных

## Куда попадают заявки пользователей?

Все заявки с формы контактов сохраняются в **базу данных PostgreSQL** вашего проекта.

### Структура базы данных

Таблица `applications` содержит следующие поля:

- `id` - уникальный идентификатор заявки (автоинкремент)
- `name` - имя пользователя
- `phone` - телефон пользователя
- `citizenship` - гражданство пользователя
- `message` - дополнительное сообщение (необязательное)
- `created_at` - дата и время создания заявки
- `ip_address` - IP-адрес пользователя
- `user_agent` - информация о браузере пользователя

### API endpoints

#### 1. Отправка заявки
**URL:** `https://functions.poehali.dev/af7c5144-f970-4caa-90d3-479cdfa764dc`  
**Метод:** POST  
**Формат запроса:**
```json
{
  "name": "Иван Иванов",
  "phone": "+79990955559",
  "citizenship": "Россия",
  "message": "Хочу узнать подробнее"
}
```

**Формат ответа:**
```json
{
  "success": true,
  "message": "Заявка успешно отправлена",
  "applicationId": 1
}
```

#### 2. Получение списка заявок (для администратора)
**URL:** `https://functions.poehali.dev/952221f8-c46b-4e02-be78-9a82cdd5434b`  
**Метод:** GET  
**Параметры:**
- `limit` - количество заявок на странице (по умолчанию: 50)
- `offset` - смещение для пагинации (по умолчанию: 0)

**Пример запроса:**
```
GET https://functions.poehali.dev/952221f8-c46b-4e02-be78-9a82cdd5434b?limit=10&offset=0
```

**Формат ответа:**
```json
{
  "applications": [
    {
      "id": 1,
      "name": "Иван Иванов",
      "phone": "+79990955559",
      "citizenship": "Россия",
      "message": "Хочу узнать подробнее",
      "createdAt": "2025-12-09T11:50:49.552300",
      "ipAddress": "158.160.16.200",
      "userAgent": "Mozilla/5.0..."
    }
  ],
  "total": 1,
  "limit": 50,
  "offset": 0
}
```

### Как просмотреть заявки?

1. **Через SQL-запрос:**
   ```sql
   SELECT * FROM applications ORDER BY created_at DESC LIMIT 50;
   ```

2. **Через API:**
   Откройте в браузере:
   ```
   https://functions.poehali.dev/952221f8-c46b-4e02-be78-9a82cdd5434b
   ```

3. **Можно создать админ-панель** для удобного просмотра заявок с фильтрацией и экспортом.

### Безопасность

- Все данные хранятся в защищенной базе данных PostgreSQL
- IP-адреса и User-Agent сохраняются для защиты от спама
- Данные доступны только через защищенное API

### Контактные данные обновлены

Телефон обратной связи изменен на: **+7 (999) 095-55-59**

Все упоминания старого номера (8 800 302-67-35) заменены на новый во всех компонентах сайта.
